{
    "collab_server" : "",
    "contents" : "#' Creates square tile map for the states of USA.\n#'\n#' @param d Numeric. Number between 0 and 1. Procentwise Diameter (length from\n#'   center to corner) of the tiles.\n#' @param center Logical. When TRUE returns the center coordinates of the tile\n#'   map.\n#' @param style Character. Selets the layout style of the tile map.\n#' @param size Numeric. Size of the tiles.\n#' @param long_offset Numeric. Value to offset the long output.\n#' @param lat_offset Numeric. Value to offset the lat output.\n#' @param exclude Character. Vector of state names which should be excluded\n#'   from the output. Matched with lowercase full state names.\n#' @return The available styles for this functions are \"NPR\",\n#'   \"The New York Times\", \"538\", \"Propublica\", \"Bloomberg\", \"The Guardian\",\n#'   \"Wall Street Journal\", \"WNYC\" or \"The Marshall Project\".\n#' @examples\n#' library(ggplot2)\n#' crimes <- data.frame(state = tolower(rownames(USArrests)), USArrests)\n#' states_map <- square_usa()\n\n#' ggplot(crimes, aes(map_id = state)) +\n#'   geom_map(aes(fill = Murder), map = states_map) +\n#'   expand_limits(x = states_map$long, y = states_map$lat)\n#'\n#' states_map <- square_usa(d = 0.5)\n#'\n#' ggplot(crimes, aes(map_id = state)) +\n#'   geom_map(aes(fill = Murder), map = states_map) +\n#'   expand_limits(x = states_map$long, y = states_map$lat) +\n#'   geom_text(data = square_usa(d = 0.5, center = TRUE),\n#'             aes(x = long, y = lat, label = states_abb),\n#'             inherit.aes = FALSE)\nsquare_usa <- function(d = 0.95, center = FALSE, style = \"NPR\",\n                       size = 1, long_offset = 0, lat_offset = 0,\n                       exclude = character()) {\n  if(d <= 0 || d > 1) {\n    warning(\"d must be in the interval (0, 1], defaulted to 0.95\")\n    d <- 0.95\n  }\n\n  if(!(style %in% c(\"NPR\", \"The New York Times\", \"538\", \"Propublica\",\n                  \"Bloomberg\", \"The Guardian\", \"Wall Street Journal\", \"WNYC\",\n                  \"The Marshall Project\"))) {\n    warning(\"Unable to recognize style, defaulted to NPR\")\n    STYLE <- \"NPR\"\n  } else {\n    STYLE <- style\n  }\n\n  exclude <- intersect(square_usa_data$region, exclude)\n  d <- d / 2 * size\n\n  dat0 <- square_usa_data %>%\n    filter(style == STYLE) %>%\n    select(- style) %>%\n    mutate(long = long * size,\n           lat = lat * size)\n\n  dat1 <- rbind(dat0 %>% mutate(long = long + d, lat = lat + d),\n                dat0 %>% mutate(long = long - d, lat = lat + d),\n                dat0 %>% mutate(long = long - d, lat = lat - d),\n                dat0 %>% mutate(long = long + d, lat = lat - d)) %>%\n    mutate(group = as.numeric(group))\n\n  if (center) {\n    dat2 <- dat0 %>%\n      mutate(long = long - dat1[114, \"long\"] + long_offset,\n             lat = lat - dat1[114, \"lat\"] + lat_offset) %>%\n      filter(!(region %in% exclude))\n    return(dat2)\n  } else {\n    dat2 <- dat1 %>%\n      mutate(long = long - dat1[114, \"long\"] + long_offset,\n             lat = lat - dat1[114, \"lat\"] + lat_offset) %>%\n      filter(!(region %in% exclude))\n    return(dat2[order(dat2$region), ] %>%\n             mutate(order = 1:(204 - length(exclude) * 4)))\n  }\n}\n",
    "created" : 1495040442203.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "1546681899",
    "id" : "F833C8C8",
    "lastKnownWriteTime" : 1495042194,
    "last_content_update" : 1495042194057,
    "path" : "~/Documents/Academia/Github/tilemapr/R/square_usa.R",
    "project_path" : "R/square_usa.R",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "relative_order" : 6,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}